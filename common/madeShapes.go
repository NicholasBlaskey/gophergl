package common

const (
	TRIANGLES = 0x0004
)

type VertParams struct {
	Position  bool
	TexCoords bool
	Normals   bool
}

func NewCube(p VertParams) (uint32, []int32, []float32) {
	offsets := []int32{}

	lenPos := 0
	if p.Position {
		lenPos = 3
		offsets = append(offsets, int32(lenPos))
	}
	position := []float32{
		-1.0, -1.0, -1.0,
		+1.0, -1.0, -1.0,
		+1.0, +1.0, -1.0,
		+1.0, +1.0, -1.0,
		-1.0, +1.0, -1.0,
		-1.0, -1.0, -1.0,

		-1.0, -1.0, +1.0,
		+1.0, -1.0, +1.0,
		+1.0, +1.0, +1.0,
		+1.0, +1.0, +1.0,
		-1.0, +1.0, +1.0,
		-1.0, -1.0, +1.0,

		-1.0, +1.0, +1.0,
		-1.0, +1.0, -1.0,
		-1.0, -1.0, -1.0,
		-1.0, -1.0, -1.0,
		-1.0, -1.0, +1.0,
		-1.0, +1.0, +1.0,

		+1.0, +1.0, +1.0,
		+1.0, +1.0, -1.0,
		+1.0, -1.0, -1.0,
		+1.0, -1.0, -1.0,
		+1.0, -1.0, +1.0,
		+1.0, +1.0, +1.0,

		-1.0, -1.0, -1.0,
		+1.0, -1.0, -1.0,
		+1.0, -1.0, +1.0,
		+1.0, -1.0, +1.0,
		-1.0, -1.0, +1.0,
		-1.0, -1.0, -1.0,

		-1.0, +1.0, -1.0,
		+1.0, +1.0, -1.0,
		+1.0, +1.0, +1.0,
		+1.0, +1.0, +1.0,
		-1.0, +1.0, +1.0,
		-1.0, +1.0, -1.0,
	}

	numVerts := len(position) / 3

	lenNormal := 0
	if p.Normals {
		lenNormal = 3
		offsets = append(offsets, int32(lenNormal))
	}
	normals := []float32{
		+0.0, +0.0, -1.0,
		+0.0, +0.0, -1.0,
		+0.0, +0.0, -1.0,
		+0.0, +0.0, -1.0,
		+0.0, +0.0, -1.0,
		+0.0, +0.0, -1.0,

		+0.0, +0.0, +1.0,
		+0.0, +0.0, +1.0,
		+0.0, +0.0, +1.0,
		+0.0, +0.0, +1.0,
		+0.0, +0.0, +1.0,
		+0.0, +0.0, +1.0,

		-1.0, +0.0, +0.0,
		-1.0, +0.0, +0.0,
		-1.0, +0.0, +0.0,
		-1.0, +0.0, +0.0,
		-1.0, +0.0, +0.0,
		-1.0, +0.0, +0.0,

		+1.0, +0.0, +0.0,
		+1.0, +0.0, +0.0,
		+1.0, +0.0, +0.0,
		+1.0, +0.0, +0.0,
		+1.0, +0.0, +0.0,
		+1.0, +0.0, +0.0,

		+0.0, -1.0, +0.0,
		+0.0, -1.0, +0.0,
		+0.0, -1.0, +0.0,
		+0.0, -1.0, +0.0,
		+0.0, -1.0, +0.0,
		+0.0, -1.0, +0.0,

		+0.0, +1.0, +0.0,
		+0.0, +1.0, +0.0,
		+0.0, +1.0, +0.0,
		+0.0, +1.0, +0.0,
		+0.0, +1.0, +0.0,
		+0.0, +1.0, +0.0,
	}

	lenTex := 0
	if p.TexCoords {
		lenTex = 2
		offsets = append(offsets, int32(lenTex))
	}
	texCoords := []float32{
		0.0, 0.0,
		1.0, 0.0,
		1.0, 1.0,
		1.0, 1.0,
		0.0, 1.0,
		0.0, 0.0,

		0.0, 0.0,
		1.0, 0.0,
		1.0, 1.0,
		1.0, 1.0,
		0.0, 1.0,
		0.0, 0.0,

		1.0, 0.0,
		1.0, 1.0,
		0.0, 1.0,
		0.0, 1.0,
		0.0, 0.0,
		1.0, 0.0,

		1.0, 0.0,
		1.0, 1.0,
		0.0, 1.0,
		0.0, 1.0,
		0.0, 0.0,
		1.0, 0.0,

		0.0, 1.0,
		1.0, 1.0,
		1.0, 0.0,
		1.0, 0.0,
		0.0, 0.0,
		0.0, 1.0,

		0.0, 1.0,
		1.0, 1.0,
		1.0, 0.0,
		1.0, 0.0,
		0.0, 0.0,
		0.0, 1.0,
	}

	outVerts := []float32{}
	for i := 0; i < numVerts; i++ {
		if lenPos != 0 {
			outVerts = append(outVerts, position[i*lenPos:i*lenPos+lenPos]...)
		}

		if lenNormal != 0 {
			outVerts = append(outVerts, normals[i*lenNormal:i*lenNormal+lenNormal]...)
		}

		if lenTex != 0 {
			outVerts = append(outVerts, texCoords[i*lenTex:i*lenTex+lenTex]...)
		}
	}

	return TRIANGLES, offsets, outVerts
}
